@startuml
'Diagrama de clase general
hide circle
skinparam classAttributeIconSize 0
skinparam backgroundColor White
skinparam RoundCorner 10
skinparam Shadowing true

skinparam class {
    ArrowColor DarkBlue
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

title Diagrama de clase de un posible modelo

class Tablero {}

class Personaje {
    + mover(unBloque : Bloque) : void
    + asignarLapiz(unLapiz : Lapiz) : void
}

class Posicion {
    - coordenadaX : int
    - coordenadaY : int
    + incrementarCoordenadaX() : void
    + decrementarCoordenadaX() : void
    + incrementarCoordenadaY() : void
    + decrementarCoordenadaY() : void
}

interface Bloque {
    + {abstract} ejecutar(unPersonaje : Pe
}

class SectorDibujo {
    + moverPersonaje(unBloque : Bloque) : void
}

class SectorAlgoritmo {
    + agregarBloque(unBloque : Bloque) : void
    + ejecutar(unSectorDibujo : SectorDibujo) : void
}

class SectorBloquesDisponibles {}

interface Bloque {
    + {abstract} ejecutar(unPersonaje : Personaje) : void
}

class BloqueArriba {
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueAbajo {
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueIzquierda{
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueDerecha {
    + ejecutar(unPersonaje : Personaje) : void
}
class BloquePersonalizado {
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueRepetir {
    - repeticiones : int
    - bloques
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueDibuja {
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueNoDibuja {
    + ejecutar(unPersonaje : Personaje) : void
}
class BloqueInvertirComportamiento {}

interface Lapiz {
    + dibuja()
}
class Dibuja {
    + dibuja()
}
class NoDibuja {
    + dibuja()
}

Tablero --> SectorDibujo
Tablero --> SectorAlgoritmo
Tablero --> SectorBloquesDisponibles

Bloque <|.. BloqueArriba
Bloque <|.. BloqueAbajo
Bloque <|.. BloqueIzquierda
Bloque <|.. BloqueDerecha
Bloque <|.. BloquePersonalizado
Bloque <|.. BloqueRepetir
Bloque <|.. BloqueDibuja
Bloque <|.. BloqueNoDibuja
Bloque <|.. BloqueInvertirComportamiento

SectorBloquesDisponibles "1" *--left "1..*" Bloque

SectorAlgoritmo "1" ---> "0..*" Bloque
SectorAlgoritmo ..left> SectorDibujo

SectorDibujo *-- Personaje
Personaje *-- Posicion
Personaje *--left Lapiz
Lapiz <|.. Dibuja
Lapiz <|.. NoDibuja

'moverDelPersonaje(unBloque) {
'    origen = posicion
'    unBloque.mover(this)
'    destino = posicion
'    lapiz dibuja(origen, destino)
'}

@enduml



@startuml
'Diagrama de secuencia para el caso de ejecución de un algoritmo con un solo bloque de mover a la derecha
skinparam classAttributeIconSize 0
skinparam backgroundColor White
skinparam RoundCorner 10
skinparam Shadowing true
skinparam ArrowColor DarkBlue
skinparam SequenceLifeLineBorderColor DarkBlue
skinparam SequenceLoopBackgroundColor DarkBlue

skinparam actor {
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

skinparam participant {
    Bound DarkBlue
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

title Ejecución de un algoritmo que sólo tiene un bloque hacia la derecha

actor Actor
participant ":BloqueDerecha" as BloqueDerecha
participant "unPersonaje:Personaje" as Personaje
participant ":Posicion" as Posicion

Actor -> BloqueDerecha : ejecutar(unPersonaje)
BloqueDerecha -> Personaje : moverDerecha()
Personaje -> Posicion : incrementarCoordenadaX()
@enduml

@startuml
'Diagrama de secuencia para el caso de ejecución de un algoritmo con un solo bloque de mover a la derecha
skinparam classAttributeIconSize 0
skinparam backgroundColor White
skinparam RoundCorner 10
skinparam Shadowing true
skinparam ArrowColor DarkBlue
skinparam SequenceLifeLineBorderColor DarkBlue
skinparam SequenceLoopBackgroundColor DarkBlue

skinparam actor {
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

skinparam participant {
    Bound DarkBlue
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

title Ejecución de un algoritmo cuyos bloques de movimiento desconocemos

participant ":SectorAlgoritmo" as SectorAlgoritmo
participant ":SectorDibujo" as SectorDibujo
participant "Bloque" as Bloque
participant ":Personaje" as Personaje
participant ":Posicion" as Posicion

SectorAlgoritmo -> SectorAlgoritmo : ejecutar(sectorDibujo)
loop para cada bloque
    SectorAlgoritmo -> SectorDibujo : moverPersonaje(bloque)
    SectorDibujo -> Bloque : ejecutar(personaje)
    Bloque -> Personaje : mover...()
    Personaje -> Posicion : ...Coordenada...()
end
@enduml

@startuml
'Diagrama de secuencia para el caso de ejecución de un algoritmo con un solo bloque de mover a la derecha
skinparam classAttributeIconSize 0
skinparam backgroundColor White
skinparam RoundCorner 10
skinparam Shadowing true
skinparam ArrowColor DarkBlue
skinparam SequenceLifeLineBorderColor DarkBlue
skinparam SequenceLoopBackgroundColor DarkBlue

skinparam actor {
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

skinparam participant {
    Bound DarkBlue
    BackgroundColor LightBlue
    BorderColor DarkBlue
}

title Ejecución de un algoritmo cuyos bloques de movimiento desconocemos

participant ":SectorAlgoritmo" as SectorAlgoritmo
participant "Bloque" as Bloque
participant ":SectorDibujo" as SectorDibujo
participant ":Personaje" as Personaje
participant ":Posicion" as Posicion

SectorAlgoritmo -> SectorAlgoritmo : ejecutar(unSectorDibujo)
loop para cada bloque
    SectorAlgoritmo -> Bloque : ejecutar(unSectorDibujo)
    Bloque -> SectorDibujo : mover...()
    SectorDibujo -> Personaje : mover...()
    Personaje -> Posicion : ...Coordenada...()
end
@enduml